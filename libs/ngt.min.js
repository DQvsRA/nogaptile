function NGT(e,i,o){function n(){t(),r(),a(),s(),d()}function t(e){var i=e||v();ii=i.columns,oi=i.fixed,J=i.width,P=i.percent,K=J}function r(){ri=y();var e=!0;return ri?(Y=ri.collector,$=ri.layout,Z=ri.gaps,e=!1):(Y=[],Z=[],$=[[]]),S=[],e}function a(){window.addEventListener("resize",l)}function s(){T.static_proportion?c():u()}function c(){for(counter=V.length,prop=T.static_proportion.split("x"),H=oi?1:Number(prop[0]),I=oi?1:Number(prop[1]),B=H*J,G=I*K;counter-->0;)child=V[counter],child.setAttribute("style","width:"+B+"px;height:"+G+"px;display:inline-block;background-color:"+child.style.backgroundColor);R.style.width=Math.ceil((ii-ii%H)*J)+"px"}function u(){for(counter=V.length;counter-->0;)child=V[counter],prop=child.dataset.size,prop=prop&&"none"!=prop?prop.split("x"):[1,1],H=oi?1:Number(prop[0]),I=oi?1:Number(prop[1]),S.push(new N(counter,H,I,child));S.reverse()}function d(){0==Y.length?(h(),g(),_()):g()}function l(){var e=v();J=K=e.width/ii,e.ischange?(x(),t(e),r()&&s(),m(),d(),T.onLayoutChanged&&T.onLayoutChanged.call(null,V,ii)):T.static_proportion?c():T.squarescale&&d(),T.onResize&&T.onResize.call(null,Math.round(J)+"px | "+Math.round(P)+"%",ii)}function h(){function e(e){for(O=ai;;){if(D=si,!(F>=O))break;for(C(O);ii>D;)L(O,D),t=$[O][D],e.call(t),D++;O++}}function i(){if(this.solved===!1)if(counter=S.length,s=0,counter>0)for(;counter-->0;){if(U=S[s],X=U.params,X.dw<=this.width){f.call(this),S.splice(s,1);break}if(T.insequense){X.dw=this.width,f.call(this),S.splice(s,1);break}s++}else this.islast=!0}function o(){if(this.solved!==!0&&this.isgap!==!1){r=this,a=new q(r.id,D,O),a.islast=r.islast;var e=function(e){if(a.merge){var i=a.merge;X=Y[i.id].params,X.dw=i.w,X.dh=i.h,p(a.merge.id+1,O,O+a.dh,D,D+a.dw)}else w(a);e&&e()},i=function(e){function i(e,i){function o(o,n){a.merge={id:i,w:o,h:n,type:e},r.isgap=!1,r.solved=!0}var n=!1;if(X=Y[i].params,("left"==e||"right"==e)&&X.y==_cursor.y&&X.dh<=a.dh&&X.dw+a.dw<=T.max_width_dimension){if(c=a.dh-X.dh,c>0)for(a.dh=X.dh;c-->0;)$[_cursor.y+a.dh+c][_cursor.x].isgap=!0;o(X.dw+a.dw,X.dh),n=!0}else if(("top"==e||"bottom"==e)&&X.x==_cursor.x&&X.dw<=a.dw&&X.dh+a.dh<=T.max_height_dimension){if(u=a.dw-X.dw,u>0)for(a.dw=X.dw;u-->0;)$[_cursor.y][_cursor.x+a.dw+u].isgap=!0;o(X.dw,X.dh+a.dh),n=!0}return n}_cursor={x:D,y:O};for(ti in ni)if(h=ni[ti],d=_cursor.x+h.x,l=_cursor.y+h.y,!(d>ii-1||0>d||l>F-1||0>l)&&(t=$[l][d],t.solved&&t.id>0&&i(ti,t.id-1)))break;e&&e.call(this)},o=function(i){if(_cursor.y<F&&a.dh<=W)if(t=$[++_cursor.y][_cursor.x],t.isgap===!0){if(a.dh+=1,t.isgap=!1,a.dw>1)for(u=a.dw;u-->0;)$[_cursor.y][_cursor.x+u].isgap=!1;o(i)}else i&&T.mergewithgap?i(e):e();else i&&T.mergewithgap?i(e):e()},n=function(e){_cursor.x<ii-1&&a.dw<=A?(t=$[_cursor.y][++_cursor.x],t.isgap===!0?(a.dw+=1,t.isgap=!1,r.isgap&&(r.isgap=!1),n(e)):(_cursor={x:D,y:O},e(i))):(_cursor={x:D,y:O},e(i))};_cursor={x:D,y:O},T.gap_extend?n.call(this,o):T.mergewithgap?i.call(this,e):e.call(this)}}function n(){var e;for(s=0,counter=Z.length;counter-->0;){if(a=Z.shift(),e=a.params,!e.islast){if(U=Y[Y.length-++s],void 0==U){console.log(s);continue}X=Object.create(U.params),X.y>e.y&&(a.obj.innerText+=" m"+U.obj.innerText,a={obj:a.obj,params:{}},a.params.dw=X.dw,a.params.dh=X.dh,a.params.x=X.x,a.params.y=X.y,U.params.dw=e.dw,U.params.dh=e.dh,U.params.x=e.x,U.params.y=e.y)}Z.push(a)}}var t={},r={},a={},s=0,c=0,u=0,d=0,l=0,h={};e(i),oi||e(o),T.insequense||oi||!T.movelastcelltoclosegap||n(),T.makegap&&!oi?m():Z=[]}function p(e,i,o,n,t){function r(e){if(e>=0)for(;e>=0;){if(L(ci,e),$[ci][e].solved!==!1)return;$[ci][e].setValue({width:ui-e}),e--}}for(ci=i;o>ci;){for(ui=n,C(ci),r(ui-1);t>ui;)L(ci,ui),$[ci][ui].setValue({id:e,solved:!0,isgap:!1}),ui++;ci++}}function f(){U.zindex=D*X.dh+O*X.dw,Y.push(U),X.x=D,X.y=O,p(Y.length,O,O+X.dh,D,D+X.dw),F=O+X.dh,this.islast=!1}function g(){for(counter=Y.length;counter-->0;)U=Y[counter],X=U.params,X?(U.obj.setAttribute("style","position:absolute;display:block;z-index:"+U.zindex+";margin-left:"+X.x*P+"%;top:"+X.y*K+"px;width:"+X.dw*P+"%;height:"+X.dh*K+"px;background-color:"+U.obj.style.backgroundColor),U.obj.dataset.index=counter):console.log(counter,U,X)}function m(){if(counter=Z.length,counter>0)for(;counter-->0;)gap=Z[counter],Y.push(gap),R.appendChild(gap.obj)}function x(){if(counter=Z.length,console.log(Z),counter>0)for(;counter-->0;)gap=Z[counter],gap=gap.obj,Y.pop(),R.removeChild(gap)}function w(e){var i=document.createElement("article");"string"==typeof T.gap_markup?i.innerHTML=T.gap_markup:i.appendChild(T.gap_markup),i.style.backgroundColor=T.gap_backgound,i.className=T.gap_classname,e.zindex=1e4+Z.length,e={params:e,obj:i},Z.push(e)}function _(){ri=M[ei].cache,void 0==ri&&(ri=M[ei].cache={}),ri.collector=Y,ri.gaps=Z,ri.layout=$}function y(){return M[ei].cache}function v(){var e={ischange:!1,width:T.static_proportion?Q:R.clientWidth};for(Q=window.innerWidth,counter=M.length;counter--;)if(value=M[counter],ei!=counter&&Q>value.min&&Q<=value.max){e.columns=value.cols,e.width=e.width/value.cols,e.percent=100/value.cols,e.fixed=value.fixed||!1,e.ischange=!0,ei=counter;break}return e}function b(){return[{min:0,max:380,cols:1,fixed:!0},{min:380,max:760,cols:2,fixed:!0},{min:760,max:1e3,cols:4},{min:1e3,max:1280,cols:6},{min:1280,max:1600,cols:8},{min:1600,max:1920,cols:10},{min:1920,max:2680,cols:12}]}function k(){return{max_width_dimension:2,max_height_dimension:2,tile_classname:!1,static_proportion:!1,insequense:!1,squarescale:!1,makegap:!1,gap_markup:"",gap_backgound:"#343434",gap_classname:"gap",gap_extend:!0,mergewithgap:!0,movelastcelltoclosegap:!0,onResize:null,onLayoutChanged:null}}function j(e){if(e)for(ti in e)T[ti]=e[ti]}function z(e){e&&(M=e)}function C(e){void 0==$[e]&&($[e]=[])}function L(e,i){return void 0==$[e][i]&&($[e][i]=new E(i)),!0}function N(e,i,o,n){this.id=e,this.params={dw:i,dh:o,x:0,y:0},this.zindex=0,this.obj=n}function q(e,i,o,n,t){this.id=e,this.x=i,this.y=o,this.dw=n||1,this.dh=t||1,this.bg="#ccc"}function E(e){this.solved=!1,this.isgap=!0,this.width=ii-e||0,this.id="none";var i=this;this.setValue=function(e){for(ti in e)i[ti]=e[ti]}}var M=i||b(),T=k(),R=document.getElementById(e),V=R.children;j(o);var A=T.max_width_dimension-1||1,W=T.max_height_dimension-1||1,B=0,G=0,H=0,I=0,O=0,D=0,F=0,J=0,K=0,P=0,Q=0,S=[],U={},X={},Y=[],Z=[],$=[[]],ei=-1,ii=0,oi=!1,ni={left:{x:-1,y:0},top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1}},ti=0,ri={},ai=0,si=0,ci=0,ui=0;return this.reinit=function(e,i){x();for(ti in M)ri=M[ti].cache,ri&&(ri.gaps=[],ri.layout=[],ri.collector=[]);j(e),z(i),ei=-1,window.removeEventListener("resize",l),n()},n(),this}