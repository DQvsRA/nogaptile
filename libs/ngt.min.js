function NGP(i,e){function t(){var i=v();i.ischange?(h(),_layoutParams=i,o(i),s(),F=b()||[],u(),E.static_proportion||n()):!E.static_proportion&&E.squarescale&&(M=O=i.width/_columns,n())}function o(i){_columns=i.columns,_fixed=i.fixed,M=i.width,T=i.percent,O=M,Q=0,D=[],F=[],U=[[]],S=[]}function s(){for(prop=(E.static_proportion||"").split("x"),N=q.children,counter=N.length;counter-->0;)child=N[counter],E.static_proportion?(W=prop[0],B=prop[1],A=W*T,L=B*O,child.setAttribute("style","width:"+A+"%;"+"height:"+L+"px;"+"display:inline-block;"+"background-color:"+child.style.backgroundColor)):(prop=child.dataset.size.split("x"),W=_fixed?1:Number(prop[0]),B=_fixed?1:Number(prop[1])),child.className=j,D.push(new _(counter,W,B,child)),Q+=W*B;D.reverse()}function n(){F.length?p():(r(),p(),x())}function r(){function i(i){for(G=re;;){if(H=ae,!(I>=G))break;for(d(G);_columns>H;)l(G,H),Y=U[G][H],i.call(Y),H++;G++}}function e(){if(this.solved===!1)if(counter=D.length,ie=0,counter>0)for(;counter-->0;){if(J=D[ie],K=J.params,K.dw<=this.width){c(),this.islast=!1,D.splice(ie,1);break}if(E.insequense){K.dw=this.width,c(),this.islast=!1,D.splice(ie,1);break}ie++}else this.islast=!0}function t(){if(this.solved!==!0&&this.isgap!==!1){Z=this,$=new w(Z.id,H,G);var i=function(i){$.merge?(f($.merge),a($.merge.id+1,G,G+$.dh,H,H+$.dw)):m($),i&&i()},e=function(i){function e(i,e){function t(t,o){$.merge={id:e,w:t,h:o,type:i},Z.isgap=!1,Z.solved=!0}var o=!1;if(K=F[e].params,("left"==i||"right"==i)&&K.y==_cursor.y&&K.dh<=$.dh&&K.dw+$.dw<=E.max_width_dimension){if(ee=$.dh-K.dh,ee>0)for($.dh=K.dh;ee-->0;)U[_cursor.y+$.dh+ee][_cursor.x].isgap=!0;t(K.dw+$.dw,K.dh),o=!0}else if(("top"==i||"bottom"==i)&&K.x==_cursor.x&&K.dw<=$.dw&&K.dh+$.dh<=E.max_height_dimension){if(te=$.dw-K.dw,te>0)for($.dw=K.dw;te-->0;)U[_cursor.y][_cursor.x+$.dw+te].isgap=!0;t(K.dw,K.dh+$.dh),o=!0}return o}Z.islast!==!0?($.inside=!0,$.islast=!1):$.islast=!0,_cursor={x:H,y:G};for(C in X)if(ne=X[C],oe=_cursor.x+ne.x,se=_cursor.y+ne.y,!(oe>_columns-1||0>oe||se>I-1||0>se)&&(Y=U[se][oe],Y.solved&&Y.id>0&&e(C,Y.id-1)))break;i&&i.call(this)},t=function(e){if(_cursor.y<I&&$.dh<=V)if(Y=U[++_cursor.y][_cursor.x],Y.isgap===!0){if($.dh+=1,Y.isgap=!1,$.dw>1)for(te=$.dw;te-->0;)U[_cursor.y][_cursor.x+te].isgap=!1;t(e)}else e&&E.mergewithgap?e(i):i();else e&&E.mergewithgap?e(i):i()},o=function(i){_cursor.x<_columns-1&&$.dw<=R?(Y=U[_cursor.y][++_cursor.x],Y.isgap===!0?($.dw+=1,Y.isgap=!1,Z.isgap&&(Z.isgap=!1),o(i)):(_cursor={x:H,y:G},i(e))):(_cursor={x:H,y:G},i(e))};_cursor={x:H,y:G},E.gap_extend?o.call(this,t):E.mergewithgap?e.call(this,i):i.call(this)}}function o(){counter=S.length;var i;for(S.reverse();counter-->0;)$=S.shift(),i=$.params,i.inside&&(J=F[F.length-++ie],K=Object.create(J.params),(K.x>i.x||K.y>=i.y)&&($={obj:$.obj,params:{}},$.params.dw=K.dw,$.params.dh=K.dh,$.params.x=K.x,$.params.y=K.y,J.params.dw=i.dw,J.params.dh=i.dh,J.params.x=i.x,J.params.y=i.y)),S.push($);S.reverse()}i(e),_fixed||i(t),!E.insequense&&E.movelastcelltoclosegap&&o(),E.makegap&&u()}function a(i,e,t,o,s){function n(i){if(i>=0)for(;i>=0;){if(l(ce,i),U[ce][i].solved!==!1)return;U[ce][i].setValue({width:de-i}),i--}}for(ce=e;t>ce;){for(de=o,d(ce),n(de-1);s>de;)l(ce,de),U[ce][de].setValue({id:i,solved:!0,isgap:!1}),de++;ce++}}function c(){F.push(J),K.x=H,K.y=G,a(F.length,G,G+K.dh,H,H+K.dw),I=G+K.dh}function d(i){void 0==U[i]&&(U[i]=[])}function l(i,e){return void 0==U[i][e]&&(U[i][e]=new y(e)),!0}function u(){for(counter=S.length;counter-->0;)$=S[counter],F.push($),q.appendChild($.obj)}function h(){for(counter=S.length;counter-->0;)$=S[counter].obj,F.pop(),q.removeChild($)}function p(){for(counter=F.length;counter-->0;)J=F[counter],K=J.params,J=J.obj,g(J,K),J.dataset.index=counter}function m(i){var e=document.createElement("article");"string"==typeof E.gap_markup?e.innerHTML=E.gap_markup:e.appendChild(E.gap_markup),e.style.backgroundColor=E.gap_backgound,e.className=k,i={params:i,obj:e},S.push(i)}function f(i){K=F[i.id].params,K.dw=i.w,K.dh=i.h,K.merge="\n"+i.type}function g(i,e){i.setAttribute("style","position:absolute;display:block;margin-left:"+e.x*T+"%;margin-top:"+e.y*O+"px;width:"+e.dw*T+"%;height:"+e.dh*O+"px;background-color:"+i.style.backgroundColor)}function x(){var i=z[_layoutParams.index];i.cellcollector=F,i.gaps=S,i.layout=U}function _(i,e,t,o){this.id=i,this.params={dw:e,dh:t,x:0,y:0},this.obj=o}function w(i,e,t,o,s){this.id=i,this.x=e,this.y=t,this.dw=o||1,this.dh=s||1,this.bg="#ccc",this.inside=!1,this.merge=!1}function y(i){this.solved=!1,this.isgap=!0,this.width=_columns-i||0,this.id="none";var e=this;this.setValue=function(i){for(C in i)e[C]=i[C]}}function b(){var i=z[_layoutParams.index];return S=i.gaps||[],U=i.layout||[[]],i.cellcollector}function v(){var i=window.innerWidth,e={ischange:!1,width:q.clientWidth};for(le=z.length;le--;)if(P=z[le],_layoutParams.index!=le&&i>P.min&&i<=P.max){e.columns=P.cols,e.width=e.width/P.cols,e.percent=100/P.cols,e.fixed=P.fixed||!1,e.index=le,e.ischange=!0;break}return e}var k="ngt-gap",j="ngt-tile",z=[{min:0,max:380,cols:1,fixed:!0},{min:380,max:760,cols:2,fixed:!0},{min:760,max:1e3,cols:4},{min:1e3,max:1280,cols:6},{min:1280,max:1600,cols:8},{min:1600,max:1920,cols:10},{min:1920,max:2680,cols:12}];e.sizes&&(z=e.sizes);var C,P,q=document.getElementById(i),N=[],E={sizes:[],max_width_dimension:2,max_height_dimension:2,static_proportion:!1,insequense:!1,squarescale:!0,makegap:!0,gap_markup:"",gap_backgound:"#ccc",gap_extend:!0,mergewithgap:!0,movelastcelltoclosegap:!0,onResize:null};for(C in e)E[C]=e[C];var R=E.max_width_dimension-1||1,V=E.max_height_dimension-1||1,A=0,L=0,W=0,B=0,G=0,H=0,I=0,M=0,O=0,T=0,D=[],F=[],J={},K={},Q=0,S=[],U=[[]];_layoutParams={index:-1},_columns=0,_fixed=!1;var X={left:{x:-1,y:0},top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1}};window.addEventListener("resize",function(){t(),E.onResize&&onResize.call()});var Y={},Z={},$={},ie=0,ee=0,te=0,oe=0,se=0,ne={},re=0,ae=0,ce=0,de=0,le=0;t()}