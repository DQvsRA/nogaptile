function NGT(i,e,t){function n(){o(),r(),a(),s(),d()}function o(i){var e=i||v();ee=e.columns,te=e.fixed,J=e.width,P=e.percent,K=J}function r(){re=y();var i=!0;return re?(Y=re.collector,$=re.layout,Z=re.gaps,i=!1):(Y=[],Z=[],$=[[]]),S=[],i}function a(){window.addEventListener("resize",l)}function s(){R.static_proportion?c():u()}function c(){for(counter=A.length,prop=R.static_proportion.split("x"),H=te?1:Number(prop[0]),I=te?1:Number(prop[1]),B=H*J,G=I*K;counter-->0;)child=A[counter],child.setAttribute("style","width:"+B+"px;height:"+G+"px;display:inline-block;background-color:"+child.style.backgroundColor);V.style.width=Math.ceil((ee-ee%H)*J)+"px"}function u(){for(counter=A.length;counter-->0;)child=A[counter],prop=child.dataset.size,prop=prop&&"none"!=prop?prop.split("x"):[1,1],H=te?1:Number(prop[0]),I=te?1:Number(prop[1]),S.push(new N(counter,H,I,child));S.reverse()}function d(){0==Y.length?(h(),g(),_()):g()}function l(){var i=v();J=K=i.width/ee,i.ischange?(x(),o(i),r()&&s(),m(),d(),R.onLayoutChanged&&R.onLayoutChanged.call(null,A,ee)):R.static_proportion?c():R.squarescale&&d(),R.onResize&&R.onResize.call(null,Math.round(J)+"px | "+Math.round(P)+"%",ee)}function h(){function i(i){for(O=ae;;){if(D=se,!(F>=O))break;for(C(O);ee>D;)L(O,D),o=$[O][D],i.call(o),D++;O++}}function e(){if(this.solved===!1)if(counter=S.length,s=0,counter>0)for(;counter-->0;){if(U=S[s],X=U.params,X.dw<=this.width){f.call(this),S.splice(s,1);break}if(R.insequense){X.dw=this.width,f.call(this),S.splice(s,1);break}s++}else this.islast=!0}function t(){if(this.solved!==!0&&this.isgap!==!1){r=this,a=new q(r.id,D,O),a.islast=r.islast;var i=function(i){if(a.merge){var e=a.merge;X=Y[e.id].params,X.dw=e.w,X.dh=e.h,p(a.merge.id+1,O,O+a.dh,D,D+a.dw)}else w(a);i&&i()},e=function(i){function e(i,e){function t(t,n){a.merge={id:e,w:t,h:n,type:i},r.isgap=!1,r.solved=!0}var n=!1;if(X=Y[e].params,("left"==i||"right"==i)&&X.y==_cursor.y&&X.dh<=a.dh&&X.dw+a.dw<=R.max_width_dimension){if(c=a.dh-X.dh,c>0)for(a.dh=X.dh;c-->0;)$[_cursor.y+a.dh+c][_cursor.x].isgap=!0;t(X.dw+a.dw,X.dh),n=!0}else if(("top"==i||"bottom"==i)&&X.x==_cursor.x&&X.dw<=a.dw&&X.dh+a.dh<=R.max_height_dimension){if(u=a.dw-X.dw,u>0)for(a.dw=X.dw;u-->0;)$[_cursor.y][_cursor.x+a.dw+u].isgap=!0;t(X.dw,X.dh+a.dh),n=!0}return n}_cursor={x:D,y:O};for(oe in ne)if(h=ne[oe],d=_cursor.x+h.x,l=_cursor.y+h.y,!(d>ee-1||0>d||l>F-1||0>l)&&(o=$[l][d],o.solved&&o.id>0&&e(oe,o.id-1)))break;i&&i.call(this)},t=function(e){if(_cursor.y<F&&a.dh<=W)if(o=$[++_cursor.y][_cursor.x],o.isgap===!0){if(a.dh+=1,o.isgap=!1,a.dw>1)for(u=a.dw;u-->0;)$[_cursor.y][_cursor.x+u].isgap=!1;t(e)}else e&&R.mergewithgap?e(i):i();else e&&R.mergewithgap?e(i):i()},n=function(i){_cursor.x<ee-1&&a.dw<=T?(o=$[_cursor.y][++_cursor.x],o.isgap===!0?(a.dw+=1,o.isgap=!1,r.isgap&&(r.isgap=!1),n(i)):(_cursor={x:D,y:O},i(e))):(_cursor={x:D,y:O},i(e))};_cursor={x:D,y:O},R.gap_extend?n.call(this,t):R.mergewithgap?e.call(this,i):i.call(this)}}function n(){var i;for(s=0,counter=Z.length;counter-->0;)a=Z.shift(),i=a.params,i.islast||(U=Y[Y.length-++s],X=Object.create(U.params),X.y>i.y&&(a={obj:a.obj,params:{}},a.params.dw=X.dw,a.params.dh=X.dh,a.params.x=X.x,a.params.y=X.y,U.params.dw=i.dw,U.params.dh=i.dh,U.params.x=i.x,U.params.y=i.y)),Z.push(a)}var o={},r={},a={},s=0,c=0,u=0,d=0,l=0,h={};i(e),te||i(t),R.insequense||te||!R.movelastcelltoclosegap||n(),R.makegap&&!te?m():Z=[]}function p(i,e,t,n,o){function r(i){if(i>=0)for(;i>=0;){if(L(ce,i),$[ce][i].solved!==!1)return;$[ce][i].setValue({width:ue-i}),i--}}for(ce=e;t>ce;){for(ue=n,C(ce),r(ue-1);o>ue;)L(ce,ue),$[ce][ue].setValue({id:i,solved:!0,isgap:!1}),ue++;ce++}}function f(){U.zindex=D*X.dh+O*X.dw,Y.push(U),X.x=D,X.y=O,p(Y.length,O,O+X.dh,D,D+X.dw),F=O+X.dh,this.islast=!1}function g(){for(counter=Y.length;counter-->0;)U=Y[counter],X=U.params,U.obj.setAttribute("style","position:absolute;display:block;z-index:"+U.zindex+";margin-left:"+X.x*P+"%;top:"+X.y*K+"px;width:"+X.dw*P+"%;height:"+X.dh*K+"px;background-color:"+U.obj.style.backgroundColor),U.obj.dataset.index=counter}function m(){if(counter=Z.length,counter>0)for(;counter-->0;)gap=Z[counter],Y.push(gap),V.appendChild(gap.obj)}function x(){if(counter=Z.length,counter>0)for(;counter-->0;)gap=Z[counter],gap=gap.obj,Y.pop(),V.removeChild(gap)}function w(i){var e=document.createElement("article");"string"==typeof R.gap_markup?e.innerHTML=R.gap_markup:e.appendChild(R.gap_markup),e.style.backgroundColor=R.gap_backgound,e.className=R.gap_classname,i.zindex=1e4+Z.length,i={params:i,obj:e},Z.push(i)}function _(){re=M[ie].cache,void 0==re&&(re=M[ie].cache={}),re.collector=Y,re.gaps=Z,re.layout=$}function y(){return M[ie].cache}function v(){var i={ischange:!1,width:R.static_proportion?Q:V.clientWidth};for(Q=window.innerWidth,counter=M.length;counter--;)if(value=M[counter],ie!=counter&&Q>value.min&&Q<=value.max){i.columns=value.cols,i.width=i.width/value.cols,i.percent=100/value.cols,i.fixed=value.fixed||!1,i.ischange=!0,ie=counter;break}return i}function b(){return[{min:0,max:380,cols:1,fixed:!0},{min:380,max:760,cols:2,fixed:!0},{min:760,max:1e3,cols:4},{min:1e3,max:1280,cols:6},{min:1280,max:1600,cols:8},{min:1600,max:1920,cols:10},{min:1920,max:2680,cols:12}]}function k(){return{max_width_dimension:2,max_height_dimension:2,tile_classname:!1,static_proportion:!1,insequense:!1,squarescale:!1,makegap:!1,gap_markup:"",gap_backgound:"#343434",gap_classname:"gap",gap_extend:!0,mergewithgap:!0,movelastcelltoclosegap:!0,onResize:null,onLayoutChanged:null}}function z(i){if(i)for(oe in i)R[oe]=i[oe]}function j(i){i&&(M=i)}function C(i){void 0==$[i]&&($[i]=[])}function L(i,e){return void 0==$[i][e]&&($[i][e]=new E(e)),!0}function N(i,e,t,n){this.id=i,this.params={dw:e,dh:t,x:0,y:0},this.zindex=0,this.obj=n}function q(i,e,t,n,o){this.id=i,this.x=e,this.y=t,this.dw=n||1,this.dh=o||1,this.bg="#ccc"}function E(i){this.solved=!1,this.isgap=!0,this.width=ee-i||0,this.id="none";var e=this;this.setValue=function(i){for(oe in i)e[oe]=i[oe]}}var M=e||b(),R=k(),V=document.getElementById(i),A=V.children;z(t);var T=R.max_width_dimension-1||1,W=R.max_height_dimension-1||1,B=0,G=0,H=0,I=0,O=0,D=0,F=0,J=0,K=0,P=0,Q=0,S=[],U={},X={},Y=[],Z=[],$=[[]],ie=-1,ee=0,te=!1,ne={left:{x:-1,y:0},top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1}},oe=0,re={},ae=0,se=0,ce=0,ue=0;return this.reinit=function(i,e){x();for(oe in M)re=M[oe].cache,re&&(re.gaps=[],re.layout=[],re.collector=[]);z(i),j(e),ie=-1,window.removeEventListener("resize",l),n()},n(),this}